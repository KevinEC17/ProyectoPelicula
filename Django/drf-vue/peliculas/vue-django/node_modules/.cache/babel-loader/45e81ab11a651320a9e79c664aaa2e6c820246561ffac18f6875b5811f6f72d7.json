{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-danger m-3\",\n  role: \"alert\"\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"alert alert-danger m-3\",\n  role: \"alert\"\n};\nconst _hoisted_5 = {\n  class: \"d-flex flex-wrap\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"card-body border-dark\"\n};\nconst _hoisted_8 = {\n  class: \"card-title mb-1\"\n};\nconst _hoisted_9 = {\n  class: \"card-text mb-1\"\n};\nconst _hoisted_10 = {\n  class: \"card-text mb-1\"\n};\nconst _hoisted_11 = {\n  class: \"card-text mb-1\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache) {\n  const _component_navbar_component_vue = _resolveComponent(\"navbar-component-vue\");\n  const _component_navigation_component_vue = _resolveComponent(\"navigation-component-vue\");\n  const _component_footer_component_vue = _resolveComponent(\"footer-component-vue\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_navbar_component_vue, {\n    onGetSearchText: _ctx.search\n  }, null, 8 /* PROPS */, [\"onGetSearchText\"]), _createVNode(_component_navigation_component_vue, {\n    onGetCategoryID: _ctx.categoryID\n  }, null, 8 /* PROPS */, [\"onGetCategoryID\"]), _ctx.searchTextRule ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h3\", null, [_createTextVNode(\"Busqueda de \\\"\"), _createElementVNode(\"strong\", null, _toDisplayString(_ctx.searchTextRule), 1 /* TEXT */), _createTextVNode(\"\\\"\")]), _createElementVNode(\"button\", {\n    class: \"btn btn-info\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.resetFilter && _ctx.resetFilter(...args))\n  }, \"Mostrar todas las peliculas\"), _ctx.filteredFilms.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createTextVNode(\" No se encuentran peliculas con el texto \"), _createElementVNode(\"strong\", null, _toDisplayString(_ctx.searchTextRule), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _ctx.categoryRecived ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, \"Peliculas de \" + _toDisplayString(_ctx.categoryRecived), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"btn btn-info\",\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.resetFilter && _ctx.resetFilter(...args))\n  }, \"Mostrar todas las peliculas\"), _ctx.filteredFilms.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" No existen peliculas de esta categoria \")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredFilms, film => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"card m-3 bg-danger-subtle\",\n      style: {\n        \"width\": \"15rem\"\n      },\n      key: film.id\n    }, [_createElementVNode(\"img\", {\n      src: film.image,\n      id: \"imgPel\",\n      class: \"img-fluid p-3\",\n      alt: \"Poster de {{ film.title }}\",\n      style: {\n        \"width\": \"15rem\",\n        \"height\": \"21rem\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_6), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h3\", _hoisted_8, _toDisplayString(film.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_9, _toDisplayString(film.description), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, _toDisplayString(film.publication), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, _toDisplayString(film.category_name), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"btn btn-danger mt-3\",\n      onClick: $event => _ctx.rent(film.id)\n    }, \"Alquilar\", 8 /* PROPS */, _hoisted_12)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _hoisted_13]), _createVNode(_component_footer_component_vue)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","role","_createElementVNode","_createVNode","_component_navbar_component_vue","onGetSearchText","_ctx","search","_component_navigation_component_vue","onGetCategoryID","categoryID","searchTextRule","_createElementBlock","_hoisted_1","_toDisplayString","onClick","_cache","args","resetFilter","filteredFilms","length","_hoisted_2","categoryRecived","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","film","style","key","id","src","image","alt","_hoisted_7","_hoisted_8","title","_hoisted_9","description","_hoisted_10","publication","_hoisted_11","category_name","$event","rent","_hoisted_12","_hoisted_13","_component_footer_component_vue"],"sources":["C:\\Users\\Usuario\\Desktop\\Django\\drf-vue\\peliculas\\vue-django\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n  <navbar-component-vue @getSearchText=\"search\"/>\n  <navigation-component-vue @getCategoryID=\"categoryID\"/>\n\n  <div v-if=\"searchTextRule\">\n    <h3>Busqueda de \"<strong>{{  searchTextRule }}</strong>\"</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No se encuentran peliculas con el texto <strong>{{  searchTextRule  }}</strong>\n    </div>\n  </div>\n\n  <div v-if=\"categoryRecived\">\n    <h3>Peliculas de {{  categoryRecived }}</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No existen peliculas de esta categoria\n    </div>\n  </div>\n  <div>\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"card m-3 bg-danger-subtle\" style=\"width: 15rem;\" v-for=\"film in filteredFilms\" :key=\"film.id\">\n        <img :src=\"film.image\" id=\"imgPel\" class=\"img-fluid p-3\" alt=\"Poster de {{ film.title }}\" style=\"width: 15rem; height: 21rem\">\n        <div class=\"card-body border-dark\">\n          <h3 class=\"card-title mb-1\">{{ film.title }}</h3>\n          <p class=\"card-text mb-1\">{{ film.description }}</p>\n          <p class=\"card-text mb-1\">{{ film.publication }}</p>\n          <p class=\"card-text mb-1\">{{ film.category_name }}</p>\n          <button class=\"btn btn-danger mt-3\" @click=\"rent(film.id)\">Alquilar</button>\n        </div>\n      </div>\n    </div>\n    <hr>\n  </div>\n  <footer-component-vue/>\n</template>\n\n<script setup>\n  import axios from 'axios'\n  import NavigationComponentVue from '../components/NavigationComponent.vue'\n  import FooterComponentVue from '../components/FooterComponent.vue'\n  import NavbarComponentVue from '../components/NavbarComponent.vue'\n  import { ref, onMounted, defineEmits } from 'vue'\n  \n  const films = ref([])\n  const allFilms = ref([])\n  const filteredFilms = ref([])\n  const categoryRecived = ref(null)\n\n  const searchTextRule = ref(null)\n  \n  const emitRent = defineEmits(['getRent'])\n\n  const rent = (id) => {\n    console.log(id)\n    emitRent('getRent', films.id)\n  }\n\n  const emitSearch = defineEmits(['getSearchText'])\n\n  const getSearch = () => {\n    emitSearch('getSearchText', searchText.value)\n  }\n\n  const search = (searchText) => {\n    searchTextRule.value = searchText\n    if(searchText){\n      filteredFilms.value = films.value.filter((film) => {\n        const filmTitle = film.title.toLowerCase();\n        const filmDescription = film.title.toLowerCase();\n        const searchTerm = searchText.toLowerCase();\n        return (\n          filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm)\n        )\n      })\n    }else{\n      filteredFilms.value = allFilms.value\n    }\n  }\n\n  const categoryID = (categoryID, categoryName) => {\n    searchTextRule.value = null\n    categoryRecived.value = categoryName\n    if(categoryID){\n      filteredFilms.value = films.value.filter((film) => film.category === categoryID)\n    } else{\n      filteredFilms.value = films.value\n    }\n  }\n  \n  const resetFilter = () => {\n    categoryRecived.value = null\n    searchTextRule.value = null\n    filteredFilms.value = films.value\n  }\n    \n  onMounted (() => {\n    axios.get('http://127.0.0.1:8000/api/films/')\n    .then( response => {\n      films.value = response.data\n      filteredFilms.value = films.value\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  })\n</script>\n\n<style>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}