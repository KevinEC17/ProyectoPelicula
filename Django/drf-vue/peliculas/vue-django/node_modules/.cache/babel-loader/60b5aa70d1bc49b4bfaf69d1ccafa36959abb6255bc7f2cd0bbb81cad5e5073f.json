{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport NavigationComponentVue from '../components/NavigationComponent.vue';\nimport FooterComponentVue from '../components/FooterComponent.vue';\nimport NavbarComponentVue from '../components/NavbarComponent.vue';\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const films = ref([]);\n    const allFilms = ref([]);\n    const filteredFilms = ref([]);\n    const categoryRecived = ref(null);\n    const searchTextRule = ref(null);\n    const rentFilms = ref([]);\n    const getRent = film => {\n      rentFilms.value.push(film);\n    };\n    const search = searchText => {\n      searchTextRule.value = searchText;\n      if (searchText) {\n        filteredFilms.value = films.value.filter(film => {\n          const filmTitle = film.title.toLowerCase();\n          const filmDescription = film.title.toLowerCase();\n          const searchTerm = searchText.toLowerCase();\n          return filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm);\n        });\n      } else {\n        filteredFilms.value = allFilms.value;\n      }\n    };\n    const categoryID = (categoryID, categoryName) => {\n      searchTextRule.value = null;\n      categoryRecived.value = categoryName;\n      if (categoryID) {\n        filteredFilms.value = films.value.filter(film => film.category === categoryID);\n      } else {\n        filteredFilms.value = films.value;\n      }\n    };\n    const resetFilter = () => {\n      categoryRecived.value = null;\n      searchTextRule.value = null;\n      filteredFilms.value = films.value;\n    };\n    onMounted(() => {\n      axios.get('http://127.0.0.1:8000/api/films/').then(response => {\n        films.value = response.data;\n        filteredFilms.value = films.value;\n      }).catch(error => {\n        console.log(error);\n      });\n    });\n    const __returned__ = {\n      films,\n      allFilms,\n      filteredFilms,\n      categoryRecived,\n      searchTextRule,\n      rentFilms,\n      getRent,\n      search,\n      categoryID,\n      resetFilter,\n      get axios() {\n        return axios;\n      },\n      NavigationComponentVue,\n      FooterComponentVue,\n      NavbarComponentVue,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","NavigationComponentVue","FooterComponentVue","NavbarComponentVue","ref","onMounted","films","allFilms","filteredFilms","categoryRecived","searchTextRule","rentFilms","getRent","film","value","push","search","searchText","filter","filmTitle","title","toLowerCase","filmDescription","searchTerm","includes","categoryID","categoryName","category","resetFilter","get","then","response","data","catch","error","console","log"],"sources":["C:/Users/Usuario/Desktop/Django/drf-vue/peliculas/vue-django/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <navbar-component-vue @getSearchText=\"search\"/>\n  <navigation-component-vue @getCategoryID=\"categoryID\"/>\n\n  <div v-if=\"searchTextRule\">\n    <h3>Busqueda de \"<strong>{{  searchTextRule }}</strong>\"</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No se encuentran peliculas con el texto <strong>{{  searchTextRule  }}</strong>\n    </div>\n  </div>\n\n  <div v-if=\"categoryRecived\">\n    <h3>Peliculas de {{  categoryRecived }}</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No existen peliculas de esta categoria\n    </div>\n  </div>\n  <div>\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"card m-3 bg-danger-subtle\" style=\"width: 15rem;\" v-for=\"film in filteredFilms\" :key=\"film.id\">\n        <img :src=\"film.image\" id=\"imgPel\" class=\"img-fluid p-3\" alt=\"Poster de {{ film.title }}\" style=\"width: 15rem; height: 21rem\">\n        <div class=\"card-body border-dark\">\n          <h3 class=\"card-title mb-1\">{{ film.title }}</h3>\n          <p class=\"card-text mb-1\">{{ film.description }}</p>\n          <p class=\"card-text mb-1\">{{ film.publication }}</p>\n          <p class=\"card-text mb-1\">{{ film.category_name }}</p>\n          <button class=\"btn btn-danger mt-3\" @click=\"getRent(film)\">Alquilar</button>\n        </div>\n      </div>\n    </div>\n    <hr>\n    <button class=\"btn btn btn-warning\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasRight\" aria-controls=\"offcanvasRight\"><img src=\"https://cdn-icons-png.flaticon.com/512/3144/3144456.png\" style=\"width: 1.5rem; height: 1.5rem\" v-if=\"$route.path == '/'\"/></button>\n\n    <div class=\"offcanvas offcanvas-end\" tabindex=\"-1\" id=\"offcanvasRight\" aria-labelledby=\"offcanvasRightLabel\">\n      <div class=\"offcanvas-header\">\n        <h5 class=\"offcanvas-title\" id=\"offcanvasRightLabel\">Peliculas alquiladas</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"offcanvas-body\" v-for=\"rfilm in rentFilms\" :key=\"rfilm.id\">\n        <p>{{rfilm.name}}</p>\n      </div>\n    </div>\n  </div>\n  <footer-component-vue/>\n</template>\n\n<script setup>\n  import axios from 'axios'\n  import NavigationComponentVue from '../components/NavigationComponent.vue'\n  import FooterComponentVue from '../components/FooterComponent.vue'\n  import NavbarComponentVue from '../components/NavbarComponent.vue'\n  import { ref, onMounted } from 'vue'\n  \n  const films = ref([])\n  const allFilms = ref([])\n  const filteredFilms = ref([])\n  const categoryRecived = ref(null)\n\n  const searchTextRule = ref(null)\n\n  const rentFilms = ref([])\n\n  const getRent = (film) => {\n    rentFilms.value.push(film)\n  }\n\n  const search = (searchText) => {\n    searchTextRule.value = searchText\n    if(searchText){\n      filteredFilms.value = films.value.filter((film) => {\n        const filmTitle = film.title.toLowerCase();\n        const filmDescription = film.title.toLowerCase();\n        const searchTerm = searchText.toLowerCase();\n        return (\n          filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm)\n        )\n      })\n    }else{\n      filteredFilms.value = allFilms.value\n    }\n  }\n\n  const categoryID = (categoryID, categoryName) => {\n    searchTextRule.value = null\n    categoryRecived.value = categoryName\n    if(categoryID){\n      filteredFilms.value = films.value.filter((film) => film.category === categoryID)\n    } else{\n      filteredFilms.value = films.value\n    }\n  }\n  \n  const resetFilter = () => {\n    categoryRecived.value = null\n    searchTextRule.value = null\n    filteredFilms.value = films.value\n  }\n    \n  onMounted (() => {\n    axios.get('http://127.0.0.1:8000/api/films/')\n    .then( response => {\n      films.value = response.data\n      filteredFilms.value = films.value\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  })\n</script>\n\n<style>\n\n</style>"],"mappings":";AAiDE,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,sBAAsB,MAAM,uCAAuC;AAC1E,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,SAASC,GAAG,EAAEC,SAAS,QAAQ,KAAK;;;;;;;IAEpC,MAAMC,KAAK,GAAGF,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,aAAa,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMK,eAAe,GAAGL,GAAG,CAAC,IAAI,CAAC;IAEjC,MAAMM,cAAc,GAAGN,GAAG,CAAC,IAAI,CAAC;IAEhC,MAAMO,SAAS,GAAGP,GAAG,CAAC,EAAE,CAAC;IAEzB,MAAMQ,OAAO,GAAIC,IAAI,IAAK;MACxBF,SAAS,CAACG,KAAK,CAACC,IAAI,CAACF,IAAI,CAAC;IAC5B,CAAC;IAED,MAAMG,MAAM,GAAIC,UAAU,IAAK;MAC7BP,cAAc,CAACI,KAAK,GAAGG,UAAU;MACjC,IAAGA,UAAU,EAAC;QACZT,aAAa,CAACM,KAAK,GAAGR,KAAK,CAACQ,KAAK,CAACI,MAAM,CAAEL,IAAI,IAAK;UACjD,MAAMM,SAAS,GAAGN,IAAI,CAACO,KAAK,CAACC,WAAW,CAAC,CAAC;UAC1C,MAAMC,eAAe,GAAGT,IAAI,CAACO,KAAK,CAACC,WAAW,CAAC,CAAC;UAChD,MAAME,UAAU,GAAGN,UAAU,CAACI,WAAW,CAAC,CAAC;UAC3C,OACEF,SAAS,CAACK,QAAQ,CAACD,UAAU,CAAC,IAAID,eAAe,CAACE,QAAQ,CAACD,UAAU,CAAC;QAE1E,CAAC,CAAC;MACJ,CAAC,MAAI;QACHf,aAAa,CAACM,KAAK,GAAGP,QAAQ,CAACO,KAAK;MACtC;IACF,CAAC;IAED,MAAMW,UAAU,GAAGA,CAACA,UAAU,EAAEC,YAAY,KAAK;MAC/ChB,cAAc,CAACI,KAAK,GAAG,IAAI;MAC3BL,eAAe,CAACK,KAAK,GAAGY,YAAY;MACpC,IAAGD,UAAU,EAAC;QACZjB,aAAa,CAACM,KAAK,GAAGR,KAAK,CAACQ,KAAK,CAACI,MAAM,CAAEL,IAAI,IAAKA,IAAI,CAACc,QAAQ,KAAKF,UAAU,CAAC;MAClF,CAAC,MAAK;QACJjB,aAAa,CAACM,KAAK,GAAGR,KAAK,CAACQ,KAAK;MACnC;IACF,CAAC;IAED,MAAMc,WAAW,GAAGA,CAAA,KAAM;MACxBnB,eAAe,CAACK,KAAK,GAAG,IAAI;MAC5BJ,cAAc,CAACI,KAAK,GAAG,IAAI;MAC3BN,aAAa,CAACM,KAAK,GAAGR,KAAK,CAACQ,KAAK;IACnC,CAAC;IAEDT,SAAS,CAAE,MAAM;MACfL,KAAK,CAAC6B,GAAG,CAAC,kCAAkC,CAAC,CAC5CC,IAAI,CAAEC,QAAQ,IAAI;QACjBzB,KAAK,CAACQ,KAAK,GAAGiB,QAAQ,CAACC,IAAI;QAC3BxB,aAAa,CAACM,KAAK,GAAGR,KAAK,CAACQ,KAAK;MACnC,CAAC,CAAC,CACDmB,KAAK,CAAEC,KAAK,IAAI;QACfC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}