{"ast":null,"code":"import axios from 'axios';\nimport NavigationComponentVue from '../components/NavigationComponent.vue';\nimport LoginComponent from '@/components/LoginComponent.vue';\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const allFilms = ref([]);\n    const filteredFilms = ref([]);\n    const categoryRecived = ref(null);\n    const categoryID = (categoryID, categoryName) => {\n      categoryRecived.value = categoryName;\n      if (categoryID) {\n        filteredFilms.value = allFilms.value.filter(film => film.category === categoryID);\n      } else {\n        filteredFilms.value = allFilms.value;\n      }\n    };\n    const resetFilter = () => {\n      categoryRecived.value = null;\n      filteredFilms.value = allFilms.value;\n    };\n    onMounted(() => {\n      axios.get('http://127.0.0.1:8000/api/films/').then(response => {\n        allFilms.value = response.data;\n        filteredFilms.value = allFilms.value;\n      }).catch(error => {\n        console.log(error);\n      });\n    });\n    const __returned__ = {\n      allFilms,\n      filteredFilms,\n      categoryRecived,\n      categoryID,\n      resetFilter,\n      get axios() {\n        return axios;\n      },\n      NavigationComponentVue,\n      LoginComponent,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","NavigationComponentVue","LoginComponent","ref","onMounted","allFilms","filteredFilms","categoryRecived","categoryID","categoryName","value","filter","film","category","resetFilter","get","then","response","data","catch","error","console","log"],"sources":["C:/Users/Usuario/Desktop/Django/drf-vue/peliculas/vue-django/src/views/HomeView.vue"],"sourcesContent":["<template>\n\n  <navigation-component-vue @getCategoryID=\"categoryID\"/>\n  <div v-if=\"categoryRecived\">\n    <h3>Peliculas de {{  categoryRecived }}</h3>\n    <button class=\"btn btn-warning\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No existen peliculas de esta categoria\n    </div>\n  </div>\n  <login-component-vue></login-component-vue>\n  <div>\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"card m-3\" style=\"width: 15rem;\" v-for=\"film in filteredFilms\" :key=\"film.id\">\n        <img :src=\"film.image\" id=\"imgPel\" class=\"img-fluid p-3\" alt=\"Poster de {{ film.title }}\" style=\"width: 15rem; height: 21rem\">\n        <div class=\"card-body\">\n          <h3 class=\"card-title mb-1\">{{ film.title }}</h3>\n          <p class=\"card-text mb-1\">{{ film.description }}</p>\n          <p class=\"card-text mb-1\">{{ film.publication }}</p>\n          <p class=\"card-text mb-1\">{{ film.category_name }}</p>\n        </div>\n      </div>\n    </div>\n    <hr>\n  </div>\n</template>\n\n<script setup>\n  import axios from 'axios'\n  import NavigationComponentVue from '../components/NavigationComponent.vue'\n  import LoginComponent from '@/components/LoginComponent.vue'\n  import { ref, onMounted } from 'vue'\n\n  const allFilms = ref([])\n  const filteredFilms = ref([])\n  const categoryRecived = ref(null)\n\n  const categoryID = (categoryID, categoryName) => {\n    categoryRecived.value = categoryName\n    if(categoryID){\n      filteredFilms.value = allFilms.value.filter((film) => film.category === categoryID)\n    } else{\n      filteredFilms.value = allFilms.value\n    }\n  }\n  \n  const resetFilter = () => {\n    categoryRecived.value = null\n    filteredFilms.value = allFilms.value\n  }\n    \n  onMounted (() => {\n    axios.get('http://127.0.0.1:8000/api/films/')\n    .then( response => {\n      allFilms.value = response.data\n      filteredFilms.value = allFilms.value\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  })\n</script>\n\n<style>\n\n</style>"],"mappings":"AA4BE,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,sBAAsB,MAAM,uCAAuC;AAC1E,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,SAASC,GAAG,EAAEC,SAAS,QAAQ,KAAK;;;;;;;IAEpC,MAAMC,QAAQ,GAAGF,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMG,aAAa,GAAGH,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMI,eAAe,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAEjC,MAAMK,UAAU,GAAGA,CAACA,UAAU,EAAEC,YAAY,KAAK;MAC/CF,eAAe,CAACG,KAAK,GAAGD,YAAY;MACpC,IAAGD,UAAU,EAAC;QACZF,aAAa,CAACI,KAAK,GAAGL,QAAQ,CAACK,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,QAAQ,KAAKL,UAAU,CAAC;MACrF,CAAC,MAAK;QACJF,aAAa,CAACI,KAAK,GAAGL,QAAQ,CAACK,KAAK;MACtC;IACF,CAAC;IAED,MAAMI,WAAW,GAAGA,CAAA,KAAM;MACxBP,eAAe,CAACG,KAAK,GAAG,IAAI;MAC5BJ,aAAa,CAACI,KAAK,GAAGL,QAAQ,CAACK,KAAK;IACtC,CAAC;IAEDN,SAAS,CAAE,MAAM;MACfJ,KAAK,CAACe,GAAG,CAAC,kCAAkC,CAAC,CAC5CC,IAAI,CAAEC,QAAQ,IAAI;QACjBZ,QAAQ,CAACK,KAAK,GAAGO,QAAQ,CAACC,IAAI;QAC9BZ,aAAa,CAACI,KAAK,GAAGL,QAAQ,CAACK,KAAK;MACtC,CAAC,CAAC,CACDS,KAAK,CAAEC,KAAK,IAAI;QACfC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}