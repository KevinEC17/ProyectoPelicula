{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport NavigationComponentVue from '../components/NavigationComponent.vue';\nimport FooterComponentVue from '../components/FooterComponent.vue';\nimport NavbarComponentVue from '../components/NavbarComponent.vue';\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const films = ref([]);\n    const allFilms = ref([]);\n    const filteredFilms = ref([]);\n    const categoryRecived = ref(null);\n    const searchTextRule = ref(null);\n    const rentFilms = ref([]);\n    const rentF = ref(null);\n    const getRent = film => {\n      if (rentFilms.value.length <= 0) {\n        rentFilms.value.push(film);\n      } else {\n        for (rentF.value in rentFilms.value) {\n          /*if(rentF.id == film){\n            console.log(\"error\");\n          }\n          else{\n            rentFilms.value.push(film)\n          }*/\n          console.log(rentF.value);\n        }\n      }\n      console.log(rentFilms.value);\n    };\n    const search = searchText => {\n      searchTextRule.value = searchText;\n      if (searchText) {\n        filteredFilms.value = films.value.filter(film => {\n          const filmTitle = film.title.toLowerCase();\n          const filmDescription = film.title.toLowerCase();\n          const searchTerm = searchText.toLowerCase();\n          return filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm);\n        });\n      } else {\n        filteredFilms.value = allFilms.value;\n      }\n    };\n    const categoryID = (categoryID, categoryName) => {\n      searchTextRule.value = null;\n      categoryRecived.value = categoryName;\n      if (categoryID) {\n        filteredFilms.value = films.value.filter(film => film.category === categoryID);\n      } else {\n        filteredFilms.value = films.value;\n      }\n    };\n    const resetFilter = () => {\n      categoryRecived.value = null;\n      searchTextRule.value = null;\n      filteredFilms.value = films.value;\n    };\n    onMounted(() => {\n      axios.get('http://127.0.0.1:8000/api/films/').then(response => {\n        films.value = response.data;\n        filteredFilms.value = films.value;\n      }).catch(error => {\n        console.log(error);\n      });\n    });\n    const __returned__ = {\n      films,\n      allFilms,\n      filteredFilms,\n      categoryRecived,\n      searchTextRule,\n      rentFilms,\n      rentF,\n      getRent,\n      search,\n      categoryID,\n      resetFilter,\n      get axios() {\n        return axios;\n      },\n      NavigationComponentVue,\n      FooterComponentVue,\n      NavbarComponentVue,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","NavigationComponentVue","FooterComponentVue","NavbarComponentVue","ref","onMounted","films","allFilms","filteredFilms","categoryRecived","searchTextRule","rentFilms","rentF","getRent","film","value","length","push","console","log","search","searchText","filter","filmTitle","title","toLowerCase","filmDescription","searchTerm","includes","categoryID","categoryName","category","resetFilter","get","then","response","data","catch","error"],"sources":["C:/Users/Usuario/Desktop/Django/drf-vue/peliculas/vue-django/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <navbar-component-vue @getSearchText=\"search\"/>\n  <navigation-component-vue @getCategoryID=\"categoryID\"/>\n\n  <div v-if=\"searchTextRule\">\n    <h3>Busqueda de \"<strong>{{  searchTextRule }}</strong>\"</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No se encuentran peliculas con el texto <strong>{{  searchTextRule  }}</strong>\n    </div>\n  </div>\n\n  <div v-if=\"categoryRecived\">\n    <h3>Peliculas de {{  categoryRecived }}</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No existen peliculas de esta categoria\n    </div>\n  </div>\n  <div>\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"card m-3 bg-danger-subtle\" style=\"width: 15rem;\" v-for=\"film in filteredFilms\" :key=\"film.id\">\n        <img :src=\"film.image\" id=\"imgPel\" class=\"img-fluid p-3\" alt=\"Poster de {{ film.title }}\" style=\"width: 15rem; height: 21rem\">\n        <div class=\"card-body border-dark\">\n          <h3 class=\"card-title mb-1\">{{ film.title }}</h3>\n          <p class=\"card-text mb-1\">{{ film.description }}</p>\n          <p class=\"card-text mb-1\">{{ film.publication }}</p>\n          <p class=\"card-text mb-1\">{{ film.category_name }}</p>\n          <button class=\"btn btn-danger mt-3\" @click=\"getRent(film)\">Alquilar</button>\n        </div>\n      </div>\n    </div>\n    <hr>\n    <button class=\"btn btn btn-warning\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasRight\" aria-controls=\"offcanvasRight\"><img src=\"https://cdn-icons-png.flaticon.com/512/3144/3144456.png\" style=\"width: 1.5rem; height: 1.5rem\" v-if=\"$route.path == '/'\"/></button>\n\n    <div class=\"offcanvas offcanvas-end\" tabindex=\"-1\" id=\"offcanvasRight\" aria-labelledby=\"offcanvasRightLabel\">\n      <div class=\"offcanvas-header\">\n        <h5 class=\"offcanvas-title\" id=\"offcanvasRightLabel\">Peliculas alquiladas</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"offcanvas-body\">\n        <p>Texto</p>\n      </div>\n    </div>\n  </div>\n  <footer-component-vue/>\n</template>\n\n<script setup>\n  import axios from 'axios'\n  import NavigationComponentVue from '../components/NavigationComponent.vue'\n  import FooterComponentVue from '../components/FooterComponent.vue'\n  import NavbarComponentVue from '../components/NavbarComponent.vue'\n  import { ref, onMounted } from 'vue'\n  \n  const films = ref([])\n  const allFilms = ref([])\n  const filteredFilms = ref([])\n  const categoryRecived = ref(null)\n\n  const searchTextRule = ref(null)\n\n  const rentFilms = ref([])\n  const rentF = ref(null)\n\n  const getRent = (film) => {\n    if(rentFilms.value.length<=0){\n      rentFilms.value.push(film)\n    }\n    else{\n      for(rentF.value in rentFilms.value){\n        /*if(rentF.id == film){\n          console.log(\"error\");\n        }\n        else{\n          rentFilms.value.push(film)\n        }*/\n        console.log(rentF.value);\n      }\n    }\n    \n    console.log(rentFilms.value);\n  }\n\n  const search = (searchText) => {\n    searchTextRule.value = searchText\n    if(searchText){\n      filteredFilms.value = films.value.filter((film) => {\n        const filmTitle = film.title.toLowerCase();\n        const filmDescription = film.title.toLowerCase();\n        const searchTerm = searchText.toLowerCase();\n        return (\n          filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm)\n        )\n      })\n    }else{\n      filteredFilms.value = allFilms.value\n    }\n  }\n\n  const categoryID = (categoryID, categoryName) => {\n    searchTextRule.value = null\n    categoryRecived.value = categoryName\n    if(categoryID){\n      filteredFilms.value = films.value.filter((film) => film.category === categoryID)\n    } else{\n      filteredFilms.value = films.value\n    }\n  }\n  \n  const resetFilter = () => {\n    categoryRecived.value = null\n    searchTextRule.value = null\n    filteredFilms.value = films.value\n  }\n    \n  onMounted (() => {\n    axios.get('http://127.0.0.1:8000/api/films/')\n    .then( response => {\n      films.value = response.data\n      filteredFilms.value = films.value\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  })\n</script>\n\n<style>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}