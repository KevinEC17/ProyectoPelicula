{"ast":null,"code":"import axios from 'axios';\nimport NavigationComponentVue from '../components/NavigationComponent.vue';\nimport FooterComponentVue from '../components/FooterComponent.vue';\nimport NavbarComponentVue from '../components/NavbarComponent.vue';\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'HomeView',\n  emits: ['getRentId'],\n  setup(__props, {\n    expose: __expose,\n    emit: emitRent\n  }) {\n    __expose();\n    const films = ref([]);\n    const allFilms = ref([]);\n    const filteredFilms = ref([]);\n    const categoryRecived = ref(null);\n    const searchTextRule = ref(null);\n    const getRent = id => {\n      console.log(id);\n      emitRent('getRentId', id);\n    };\n    const search = searchText => {\n      searchTextRule.value = searchText;\n      if (searchText) {\n        filteredFilms.value = films.value.filter(film => {\n          const filmTitle = film.title.toLowerCase();\n          const filmDescription = film.title.toLowerCase();\n          const searchTerm = searchText.toLowerCase();\n          return filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm);\n        });\n      } else {\n        filteredFilms.value = allFilms.value;\n      }\n    };\n    const categoryID = (categoryID, categoryName) => {\n      searchTextRule.value = null;\n      categoryRecived.value = categoryName;\n      if (categoryID) {\n        filteredFilms.value = films.value.filter(film => film.category === categoryID);\n      } else {\n        filteredFilms.value = films.value;\n      }\n    };\n    const resetFilter = () => {\n      categoryRecived.value = null;\n      searchTextRule.value = null;\n      filteredFilms.value = films.value;\n    };\n    onMounted(() => {\n      axios.get('http://127.0.0.1:8000/api/films/').then(response => {\n        films.value = response.data;\n        filteredFilms.value = films.value;\n      }).catch(error => {\n        console.log(error);\n      });\n    });\n    const __returned__ = {\n      films,\n      allFilms,\n      filteredFilms,\n      categoryRecived,\n      searchTextRule,\n      emitRent,\n      getRent,\n      search,\n      categoryID,\n      resetFilter,\n      get axios() {\n        return axios;\n      },\n      NavigationComponentVue,\n      FooterComponentVue,\n      NavbarComponentVue,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","NavigationComponentVue","FooterComponentVue","NavbarComponentVue","ref","onMounted","films","allFilms","filteredFilms","categoryRecived","searchTextRule","getRent","id","console","log","emitRent","search","searchText","value","filter","film","filmTitle","title","toLowerCase","filmDescription","searchTerm","includes","categoryID","categoryName","category","resetFilter","get","then","response","data","catch","error"],"sources":["C:/Users/Usuario/Desktop/Django/drf-vue/peliculas/vue-django/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <navbar-component-vue @getSearchText=\"search\"/>\n  <navigation-component-vue @getCategoryID=\"categoryID\"/>\n\n  <div v-if=\"searchTextRule\">\n    <h3>Busqueda de \"<strong>{{  searchTextRule }}</strong>\"</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No se encuentran peliculas con el texto <strong>{{  searchTextRule  }}</strong>\n    </div>\n  </div>\n\n  <div v-if=\"categoryRecived\">\n    <h3>Peliculas de {{  categoryRecived }}</h3>\n    <button class=\"btn btn-info\" @click=\"resetFilter\">Mostrar todas las peliculas</button>\n    <div class=\"alert alert-danger m-3\" role=\"alert\" v-if=\"filteredFilms.length === 0\">\n      No existen peliculas de esta categoria\n    </div>\n  </div>\n  <div>\n    <div class=\"d-flex flex-wrap\">\n      <div class=\"card m-3 bg-danger-subtle\" style=\"width: 15rem;\" v-for=\"film in filteredFilms\" :key=\"film.id\">\n        <img :src=\"film.image\" id=\"imgPel\" class=\"img-fluid p-3\" alt=\"Poster de {{ film.title }}\" style=\"width: 15rem; height: 21rem\">\n        <div class=\"card-body border-dark\">\n          <h3 class=\"card-title mb-1\">{{ film.title }}</h3>\n          <p class=\"card-text mb-1\">{{ film.description }}</p>\n          <p class=\"card-text mb-1\">{{ film.publication }}</p>\n          <p class=\"card-text mb-1\">{{ film.category_name }}</p>\n          <button class=\"btn btn-danger mt-3\" @click=\"getRent(film.id)\">Alquilar</button>\n        </div>\n      </div>\n    </div>\n    <hr>\n  </div>\n  <footer-component-vue/>\n</template>\n\n<script setup>\n  import axios from 'axios'\n  import NavigationComponentVue from '../components/NavigationComponent.vue'\n  import FooterComponentVue from '../components/FooterComponent.vue'\n  import NavbarComponentVue from '../components/NavbarComponent.vue'\n  import { ref, onMounted, defineEmits } from 'vue'\n  \n  const films = ref([])\n  const allFilms = ref([])\n  const filteredFilms = ref([])\n  const categoryRecived = ref(null)\n\n  const searchTextRule = ref(null)\n\n  const emitRent = defineEmits(['getRentId'])\n  \n  const getRent = (id) => {\n    console.log(id)\n    emitRent('getRentId', id)\n  }\n\n  const search = (searchText) => {\n    searchTextRule.value = searchText\n    if(searchText){\n      filteredFilms.value = films.value.filter((film) => {\n        const filmTitle = film.title.toLowerCase();\n        const filmDescription = film.title.toLowerCase();\n        const searchTerm = searchText.toLowerCase();\n        return (\n          filmTitle.includes(searchTerm) || filmDescription.includes(searchTerm)\n        )\n      })\n    }else{\n      filteredFilms.value = allFilms.value\n    }\n  }\n\n  const categoryID = (categoryID, categoryName) => {\n    searchTextRule.value = null\n    categoryRecived.value = categoryName\n    if(categoryID){\n      filteredFilms.value = films.value.filter((film) => film.category === categoryID)\n    } else{\n      filteredFilms.value = films.value\n    }\n  }\n  \n  const resetFilter = () => {\n    categoryRecived.value = null\n    searchTextRule.value = null\n    filteredFilms.value = films.value\n  }\n    \n  onMounted (() => {\n    axios.get('http://127.0.0.1:8000/api/films/')\n    .then( response => {\n      films.value = response.data\n      filteredFilms.value = films.value\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  })\n</script>\n\n<style>\n\n</style>"],"mappings":"AAsCE,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,sBAAsB,MAAM,uCAAuC;AAC1E,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,SAASC,GAAG,EAAEC,SAAsB,QAAQ,KAAK;;;;;;;;;IAEjD,MAAMC,KAAK,GAAGF,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,aAAa,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMK,eAAe,GAAGL,GAAG,CAAC,IAAI,CAAC;IAEjC,MAAMM,cAAc,GAAGN,GAAG,CAAC,IAAI,CAAC;IAIhC,MAAMO,OAAO,GAAIC,EAAE,IAAK;MACtBC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC;MACfG,QAAQ,CAAC,WAAW,EAAEH,EAAE,CAAC;IAC3B,CAAC;IAED,MAAMI,MAAM,GAAIC,UAAU,IAAK;MAC7BP,cAAc,CAACQ,KAAK,GAAGD,UAAU;MACjC,IAAGA,UAAU,EAAC;QACZT,aAAa,CAACU,KAAK,GAAGZ,KAAK,CAACY,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAK;UACjD,MAAMC,SAAS,GAAGD,IAAI,CAACE,KAAK,CAACC,WAAW,CAAC,CAAC;UAC1C,MAAMC,eAAe,GAAGJ,IAAI,CAACE,KAAK,CAACC,WAAW,CAAC,CAAC;UAChD,MAAME,UAAU,GAAGR,UAAU,CAACM,WAAW,CAAC,CAAC;UAC3C,OACEF,SAAS,CAACK,QAAQ,CAACD,UAAU,CAAC,IAAID,eAAe,CAACE,QAAQ,CAACD,UAAU,CAAC;QAE1E,CAAC,CAAC;MACJ,CAAC,MAAI;QACHjB,aAAa,CAACU,KAAK,GAAGX,QAAQ,CAACW,KAAK;MACtC;IACF,CAAC;IAED,MAAMS,UAAU,GAAGA,CAACA,UAAU,EAAEC,YAAY,KAAK;MAC/ClB,cAAc,CAACQ,KAAK,GAAG,IAAI;MAC3BT,eAAe,CAACS,KAAK,GAAGU,YAAY;MACpC,IAAGD,UAAU,EAAC;QACZnB,aAAa,CAACU,KAAK,GAAGZ,KAAK,CAACY,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACS,QAAQ,KAAKF,UAAU,CAAC;MAClF,CAAC,MAAK;QACJnB,aAAa,CAACU,KAAK,GAAGZ,KAAK,CAACY,KAAK;MACnC;IACF,CAAC;IAED,MAAMY,WAAW,GAAGA,CAAA,KAAM;MACxBrB,eAAe,CAACS,KAAK,GAAG,IAAI;MAC5BR,cAAc,CAACQ,KAAK,GAAG,IAAI;MAC3BV,aAAa,CAACU,KAAK,GAAGZ,KAAK,CAACY,KAAK;IACnC,CAAC;IAEDb,SAAS,CAAE,MAAM;MACfL,KAAK,CAAC+B,GAAG,CAAC,kCAAkC,CAAC,CAC5CC,IAAI,CAAEC,QAAQ,IAAI;QACjB3B,KAAK,CAACY,KAAK,GAAGe,QAAQ,CAACC,IAAI;QAC3B1B,aAAa,CAACU,KAAK,GAAGZ,KAAK,CAACY,KAAK;MACnC,CAAC,CAAC,CACDiB,KAAK,CAAEC,KAAK,IAAI;QACfvB,OAAO,CAACC,GAAG,CAACsB,KAAK,CAAC;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}